<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>





	<meta http-equiv="CONTENT-TYPE" content="text/html; charset=utf-8"><title></title>
	
	<meta name="GENERATOR" content="LibreOffice 3.3  (Linux)">
	<meta name="CREATED" content="20120908;10534700">
	<meta name="CHANGED" content="20120914;21334800">
	<style type="text/css">
	<!--
		@page { margin: 0.79in }
		P { margin-bottom: 0.08in }
		H2.western { font-family: "Albany", sans-serif; font-size: 14pt; font-style: italic }
		H2.cjk { font-family: "HG Mincho Light J"; font-size: 14pt; font-style: italic }
		H2.ctl { font-family: "Arial Unicode MS"; font-size: 14pt; font-style: italic }
		A:link { so-language: zxx }
	-->
	</style><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta http-equiv="content-type" content="text/html; charset=utf-8"></head><body dir="ltr" lang="en-US">
<h1 style="text-align: center; font-family: Helvetica,Arial,sans-serif;">Amateur Multicast Protocol (AMP-2)<br>
</h1>

<p style="margin-bottom: 0in; font-family: Helvetica,Arial,sans-serif;">Version 2.0.0 - W1HKJ
&lt;<a href="mailto:w1hkj@w1hkj.com">w1hkj@w1hkj.com</a>&gt;</p>
<p style="font-family: Helvetica,Arial,sans-serif;">Derived from Amp 1.0, by <span style="color: rgb(0, 0, 0); font-size: medium; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; display: inline ! important; float: none;">Walt Fair, Jr., W5ALT</span></p>


<p style="margin-bottom: 0in; font-family: Helvetica,Arial,sans-serif;">revised <sdfield type="DATETIME" sdval="41166.8904513889" sdnum="1033;1033;MM/DD/YY">10/05/12</sdfield>,
<sdfield type="DATETIME" sdval="41166.8906018519" sdnum="1033;1033;HH:MM:SS AM/PM">0630</sdfield></p>
<h2 style="font-family: Helvetica,Arial,sans-serif;"><sdfield type="DATETIME" sdval="41166.8906018519" sdnum="1033;1033;HH:MM:SS AM/PM">Disclaimer</sdfield></h2>
<p style="font-family: Helvetica,Arial,sans-serif;">
This is an unofficial extension of the original Amp specification which is maintained by the <a href="http://www.spar-hams.org/docs/amp-protocol.html">Society for the Preservation of Amateur Radio.</a></p>


<h2 style="font-family: Helvetica,Arial,sans-serif;">General description</h2>
<p style="color: rgb(0, 0, 0); font-family: Helvetica,Arial,sans-serif; font-size: medium; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;">Multicasting
is&nbsp; a non-connected protocol and the receiving stations are
totally passive, there is no need for hand shaking and related
overhead. The server simply repeatedly sends files, with enough
information to allow them to be identified, checked for errors and
stored. The clients or receiving stations, likewise, have no need to
transmit, but simply listen for any files of interest, receive and
saves them and checks for errors. If errors are found, the receiver
simply waits until the file is sent again and attempts to retrieve the
portion that was bad.</p>
<p style="color: rgb(0, 0, 0); font-family: Helvetica,Arial,sans-serif; font-size: medium; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;">No
distinction is made between text and binary files.&nbsp; Either may be
compressed, encoded using base numeric system encoding, or transmitted
in original form.&nbsp; Information regarding compression, encoding or
other file manipulation is contained within the data transmission and
is not an inherent part of the protocol.</p>
<p style="color: rgb(0, 0, 0); font-family: Helvetica,Arial,sans-serif; font-size: medium; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;">In
order to transmit files for remote reception, the minimum information
needed is the name of the file and it's modification date-time, the
method used for uncompressing the file (if compressed), the base
encoding system (if used, ie: base-64 ...) and the data
contained in the file.&nbsp; The combination of modification date-time
and file name is sufficient to make each file transfer uniquely
identifiable.&nbsp; Cycle Redundancy Checksum (CRC-16) values for each
element of the protocol is used to ensure
accuracy of reception. For subsequently storing missing data blocks, a
block number is also necessary to indicate the data block sequence.</p><p style="color: rgb(0, 0, 0); font-family: Helvetica,Arial,sans-serif; font-size: medium; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;">Any amateur radio transmission mode which supports the full ANSI character set may be used as the transport layer.<br>
</p>
<p style="color: rgb(0, 0, 0); font-family: Helvetica,Arial,sans-serif; font-size: medium; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;">Since
the transmission is to be done using commonly available systems, it is
useful to further identify the information. Of course, as in all
amateur communications, there is also the legal necessity of station
identification, too.</p>
<h2 style="font-family: Helvetica,Arial,sans-serif;">Protocol elements</h2>


<p style="margin-bottom: 0in; font-family: Helvetica,Arial,sans-serif;" align="justify">The Amateur Multicast
Protocol (AMP) version 2.0 consists of a sequence of elements
described as follows.</p>

<p style="margin-bottom: 0in; font-family: Helvetica,Arial,sans-serif;" align="justify">Each protocol element
consists of a keyword with character count and checksum enclosed in
angle brackets (&lt; &gt;), followed by an optional block number and
the specified data. Other information within the brackets may be
included, but will be ignored by the receiving station. The optional
text information may be useful for comments and other purposes. <br>
</p>
<p style="margin-bottom: 0in; font-family: Helvetica,Arial,sans-serif;" align="justify">For readability, a
carriage return (or anything else) may be sent following the data and
it should be ignored by the receiver.</p>

<p style="margin-bottom: 0in; font-family: Helvetica,Arial,sans-serif;" align="justify">The
overall format of a protocol block is:</p>

<p style="margin-bottom: 0in; font-family: Helvetica,Arial,sans-serif;">&lt;keyword [Byte-count
Checksum]&gt;[{HASH:Block-number}][data]</p>
<p style="margin-bottom: 0in; font-family: Helvetica,Arial,sans-serif;"><br>
</p>
<div style="margin-left: 40px; font-family: Helvetica,Arial,sans-serif;"><span style="font-weight: bold;">keyword</span> uniqely identifies the use of each Amp block<br>
<br>
</div>
<div style="font-family: Helvetica,Arial,sans-serif;">
<p style="margin-bottom: 0in; margin-left: 40px; font-family: Helvetica,Arial,sans-serif;" align="justify"><span style="font-weight: bold;">Byte-count</span>. The byte
count contains the number of bytes in the data block. For file names,
descriptions, etc. it is the number of characters comprising the name
or character string. For file content blocks, it represents the
number of bytes transmitted in the data block, irregardless of how
they might be handled by the client (receiver) software.</p>
<p style="margin-bottom: 0in; margin-left: 40px; font-family: Helvetica,Arial,sans-serif;" align="justify"><br>
</p>
</div>
<div style="margin-left: 40px; font-family: Helvetica,Arial,sans-serif;">
<span style="font-weight: bold;">Checksum</span>. The
checksum is used by the receiving station to determine the accuracy
of the received data. It is a 16 bit cycle redundancy check (Crc16)
value.&nbsp; Crc16 C++ code is found in source file crc16.h associated with the application <span style="font-style: italic;">flamp</span>. The CS
value is always transmitted as a 4 character hex string.
<span style="font-weight: bold;"><br>
<br>
HASH</span> is a 4 character
hexadecimal number that is the Crc16 value associated with a
concatenated string which consists of the date-time, colon,
and the filename, ie:</div>


<p style="margin-bottom: 0in; margin-left: 80px; font-family: Helvetica,Arial,sans-serif;" align="justify">20120915002015:testfile.txt.</p>
<p style="margin-bottom: 0in; margin-left: 40px; font-family: Helvetica,Arial,sans-serif;" align="justify"></p>
<div style="margin-left: 40px; font-family: Helvetica,Arial,sans-serif;">where the date-time is the the sytstem date-time stamp associated with the file's last modificiation.<br>
<br><span style="font-weight: bold;">
Block-number</span>. The block
number is only needed while sending file contents. For transmission,
the file is divided into convenient sized blocks (64 bytes is
recommended) and each block is numbered starting with 1 for the first
block sent, 2 for the second, etc. The use of a block number allows
the client software to keep track of what part of the file has been
correctly received and which parts are still incorrect, so that the
needed blocks can be received during a subsequent transmission.</div><h2 style="font-family: Helvetica,Arial,sans-serif;">Protocol blocks<br>
</h2>
<p style="margin-bottom: 0in; font-family: Helvetica,Arial,sans-serif;"><span style="font-weight: bold;">&lt;PROG # CS&gt;</span><span style="font-style: italic;">[name and version of software
used to generate the Amp text stream].</span></p>

<p style="margin-bottom: 0in; font-family: Helvetica,Arial,sans-serif;" align="justify"><span style="font-weight: bold;">&lt;ID # CS&gt;</span><span style="font-style: italic;">callsign
other info</span>. Every transmission should begin with the station
identification. In addition, at regular intervals (at least every 10
minutes and at the end of a communication in the US), there is the
legal requirement for station identification. In order to separate
the identification function from other data, the ID keyword should be
used.</p>
<p style="margin-bottom: 0in; font-family: Helvetica,Arial,sans-serif;" align="justify">In many cases the
receiver is free to ignore this keyword, unless needed for logging or
other purposes. The main reason for including station identification
as a separate keyword block is in order to separate identification
data from file data in the middle of file transmission and reception.</p>
<p style="margin-bottom: 0in; font-family: Helvetica,Arial,sans-serif;">Example: &lt;ID 15 C2BC&gt;W1HKJ Toney,
AL</p>
<p style="margin-bottom: 0in; font-family: Helvetica,Arial,sans-serif;"><span style="font-weight: bold;">&lt;FILE # CS&gt;</span><span style="font-style: italic;">date-time:file-name</span>, the modification date-time and name
of the file to be transmitted is sent as data following this keyword.</p>
<p style="margin-bottom: 0in; font-family: Helvetica,Arial,sans-serif;">Example: <font size="2"><span style="font-style: normal;"><span style="font-weight: normal;">&lt;FILE
29 2499&gt;20120915022802:jabberwock.txt</span></span></font></p>
<p style="margin-bottom: 0in; font-family: Helvetica,Arial,sans-serif;" align="justify"><span style="font-weight: bold;">&lt;SIZE # CS&gt;</span><span style="font-style: italic;">{HASH}FSIZE
NBLOCKS BLKSIZE</span>.&nbsp; The size of the file, in bytes, the number of
data blocks to be transmitted and the block size is sent as data
following this keyword in normal ASCII decimal. The following example
represents a file that is 200 bytes long and will be sent in 4 data
blocks. Note that the 8 for character count indicates the length of
the data, which is "332 6 64".</p>
<p style="margin-bottom: 0in; font-family: Helvetica,Arial,sans-serif;" align="justify">The data blocks will be
64, 64, 64 and 8 bytes long.</p>
<p style="margin-bottom: 0in; font-family: Helvetica,Arial,sans-serif;">Example: <font size="2"><span style="font-style: normal;"><span style="font-weight: normal;">&lt;SIZE
15 F244&gt;{2499}586 10 64</span></span></font></p>
<p style="margin-bottom: 0in; font-family: Helvetica,Arial,sans-serif;" align="justify"><span style="font-weight: bold;">&lt;DESC # CS&gt;</span><span style="font-style: italic;">textual description</span>. An
ASCII description of the file to be transmitted is sent as data
following this keyword. This is an optional field.</p>
<p style="margin-bottom: 0in; font-family: Helvetica,Arial,sans-serif;" align="justify"><span style="font-weight: bold;">&lt;DATA #
CS&gt;</span><span style="font-style: italic;">{HASH:BlkNum}</span>.
The actual data contents of the file to be
transmitted is sent as data following this keyword. File contents are
usually sent in consecutive DATA blocks, each with a block number
starting
with 1, a character count (i.e. block size) and check sum. This a
change from the original Amp protocol. The Block Number must be a
part of the data line so that it is included in the Crc-16
checksum.&nbsp; Data transmissions may also consist of a partial list
of DATA blocks.&nbsp; <br>
</p>
<p style="margin-bottom: 0in; font-family: Helvetica,Arial,sans-serif;">Example1:</p>
<p style="font-family: Monaco; margin-left: 40px;"><font size="2"><span style="font-style: normal;"><span style="font-weight: normal;">&lt;DATA
72 240C&gt;{2499:1}[b256:start]526</span></span></font></p>
<p style="margin-bottom: 0in; font-family: Monaco; margin-left: 40px;"><font size="2"><span style="font-style: normal;"><span style="font-weight: normal;">=LZMA:0:0:3-]:0:0:0:4:0=l=--(-t;=-h-zw-------a)-</span></span></font></p>
<p style="margin-bottom: 0in;">Example2:</p>
<p style="margin-bottom: 0in; font-family: Monaco; margin-left: 40px;"><font size="2"><span style="font-style: normal;"><span style="font-weight: normal;">&lt;DATA
72
A5E6&gt;{2499:2})F---===-----,R-:3--=--k/:AMA--{-7-=---\9---\-:C-cO--)&lt;-B:4--:Ad</span></span></font></p>
<p style="margin-bottom: 0in;">(Example 1 contains an embedded line
feed character)</p>
<p style="margin-bottom: 0in;">(Example 2 contains compressed, base256
encoded data; unprintable characters represented by '-' and '=')</p>
<p style="margin-bottom: 0in; font-family: Helvetica,Arial,sans-serif;" align="justify"><span style="font-weight: bold;">&lt;CNTL # CS&gt;</span><span style="font-style: italic;">control-word</span>.
This keyword indicates that a transmission control word is
the data load.&nbsp; The control word may be either EOF (end of file) or EOT (end
of transmission).</p>
<p style="margin-bottom: 0in; font-family: Helvetica,Arial,sans-serif;">Examples:</p>
<p style="margin-bottom: 0in; font-family: Monaco; margin-left: 40px;"><small>&lt;CNTL 5 9016&gt;{EOF} 
</small></p>
<p style="margin-bottom: 0in; font-family: Monaco; margin-left: 40px;"><small>&lt;CNTL 5 301A&gt;{EOT}</small></p>
<h2>Multiple file transfers</h2>
<span style="font-family: Helvetica,Arial,sans-serif;">Several files
may be transfered within a single Amp transmission.&nbsp; The protocol
insures that each file and it's data blocks are uniquely identifiable
so that an error free recreation of the file is possible at the
transfer destination.</span><br>
<h2>Transfer Examples:</h2>
<h3>Original text:</h3><span style="font-family: Monaco;">
paris paris paris paris paris paris paris paris paris paris</span><br style="font-family: Monaco;"><span style="font-family: Monaco;">
PARIS PARIS PARIS PARIS PARIS PARIS PARIS PARIS PARIS PARIS</span><br style="font-family: Monaco;"><span style="font-family: Monaco;">
paris paris paris paris paris paris paris paris paris paris</span><br style="font-family: Monaco;"><span style="font-family: Monaco;">
PARIS PARIS PARIS PARIS PARIS PARIS PARIS PARIS PARIS PARIS</span><br style="font-family: Monaco;">
<h3>Text data transfer:</h3>
<div style="margin-left: 40px; font-family: Monaco;">&lt;PROG 13 0146&gt;FLAMP 1.0.0AM<br>
&lt;FILE 24 583A&gt;20121005120009:paris.txt<br>
&lt;ID 20 D575&gt;W1HKJ Toney, Alabama<br>
&lt;SIZE 14 A148&gt;{583A}240 8 32<br>
&lt;DATA 40 118B&gt;{583A:1}paris paris paris paris paris pa<br>
&lt;DATA 40 D54E&gt;{583A:2}ris paris paris paris paris<br>
PARI<br>
&lt;DATA 40 ADFF&gt;{583A:3}S PARIS PARIS PARIS PARIS PARIS <br>
&lt;DATA 40 D3CA&gt;{583A:4}PARIS PARIS PARIS PARIS<br>
paris pa<br>
&lt;DATA 40 0244&gt;{583A:5}ris paris paris paris paris pari<br>
&lt;DATA 40 0BB3&gt;{583A:6}s paris paris paris<br>
PARIS PARIS <br>
&lt;DATA 40 609B&gt;{583A:7}PARIS PARIS PARIS PARIS PARIS PA<br>
&lt;DATA 24 B689&gt;{583A:8}RIS PARIS PARIS<br>
<br>
&lt;CNTL 5 9016&gt;{EOF}<br>
&lt;CNTL 5 301A&gt;{EOT}<br>
</div>


<h3>Compressed text data transfer:</h3><span style="font-family: Helvetica,Arial,sans-serif;">
The above file was compressed using the LZMA algorithm and then base
encode using base-64 encoding.&nbsp; Base-64 insures that all
characters in the transmission will be contained within the supported
character set of most available amateur radio transport layers (digital
modem types).</span><br>
<br>
<div style="margin-left: 40px;"><span style="font-family: Monaco;">&lt;PROG 13 0146&gt;FLAMP 1.0.0AM<br>
&lt;FILE 24 583A&gt;20121005120009:paris.txt<br>
&lt;ID 20 D575&gt;W1HKJ Toney, Alabama<br>
&lt;SIZE 13 8A6D&gt;{583A}77 3 32<br>
&lt;DATA 40 DE3B&gt;{583A:1}[b64:start]AUxaTUEAAADwXQAAAAQAO<br>
&lt;DATA 40 CAAB&gt;{583A:2}BhKq0E6M4uCxrH2FRC3VLLDLOKtP7V2A<br>
&lt;DATA 21 EE0F&gt;{583A:3}AA=<br>
[b64:end]<br>
&lt;CNTL 5 9016&gt;{EOF}<br>
&lt;CNTL 5 301A&gt;{EOT}</span><br>
</div>
<br>
<span style="font-family: Helvetica,Arial,sans-serif;">The same file compressed and then base-256 encoded (unprintable characters are shown as '-' or '=')</span><br>
<br>
<div style="margin-left: 40px;"><span style="font-family: Monaco;">&lt;PROG 13 0146&gt;FLAMP 1.0.0AM<br>
&lt;FILE 24 583A&gt;20121005120009:paris.txt<br>
&lt;ID 20 D575&gt;W1HKJ Toney, Alabama<br>
&lt;SIZE 13 A46C&gt;{583A}79 3 32<br>
&lt;DATA 40 2801&gt;{583A:1}[b256:start]41<br>
:1LZMA:0:0:0-]:0:<br>
&lt;DATA 40 26A5&gt;{583A:2}0:0:4:08=J-A::3-----==-T--,--?-v<br>
&lt;DATA 23 50DF&gt;{583A:3}:0:0<br>
[b256:end]<br>
&lt;CNTL 5 9016&gt;{EOF}<br>
&lt;CNTL 5 301A&gt;{EOT}<br>
</span><span style="font-family: Monaco;"></span><br>
</div>
<h3>Additional header information</h3>
<span style="font-family: Helvetica,Arial,sans-serif;">Programs using this protocol may add information both preceding and trailing the protocol blocks.&nbsp; For example:<br>
<br>
</span>
<div style="margin-left: 40px;"><span style="font-family: Monaco;">QST QST de W1HKJ Toney, Alabama</span><br style="font-family: Helvetica,Arial,sans-serif;">
</div>

<br>
<br>
</body></html>